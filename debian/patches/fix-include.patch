diff -aur imx-vpu-hantro-1.11.0.orig/h1_encoder/software/linux_reference/Makefile imx-vpu-hantro-1.11.0/h1_encoder/software/linux_reference/Makefile
--- imx-vpu-hantro-1.11.0.orig/h1_encoder/software/linux_reference/Makefile	2019-12-07 14:54:19.089482531 +0000
+++ imx-vpu-hantro-1.11.0/h1_encoder/software/linux_reference/Makefile	2019-12-07 14:57:54.000275292 +0000
@@ -175,6 +175,10 @@
           $(DEBFLAGS) $(INCLUDE)
 CFLAGS += -Wsign-compare -Wmissing-field-initializers
 
+ifneq ($(IMX_KERNEL_HEADERS),)
+CFLAGS += -I$(IMX_KERNEL_HEADERS)
+endif
+
 ifeq ($(USE_64BIT_ENV), y)
 CFLAGS += -DADDRESS_WIDTH_64
 endif
diff -aur imx-vpu-hantro-1.11.0.orig/Makefile_G1G2 imx-vpu-hantro-1.11.0/Makefile_G1G2
--- imx-vpu-hantro-1.11.0.orig/Makefile_G1G2	2019-12-07 14:54:19.145481177 +0000
+++ imx-vpu-hantro-1.11.0/Makefile_G1G2	2019-12-07 14:58:26.623483119 +0000
@@ -10,7 +10,10 @@
 
 INCLUDE_HEADERS += -I$(SOURCE_ROOT)/linux/memalloc
 #INCLUDE_HEADERS += -I$(SOURCE_ROOT)/linux/ldriver
-INCLUDE_HEADERS += -I$(SDKTARGETSYSROOT)/usr/include/imx
+
+ifneq ($(IMX_KERNEL_HEADERS),)
+INCLUDE_HEADERS += -I$(IMX_KERNEL_HEADERS)
+endif
 
 CFLAGS += -DDEC_MODULE_PATH=\"/dev/mxc_hantro\" -DUSE_FAKE_RFC_TABLE -DFIFO_DATATYPE=void* -DNDEBUG -DDOWN_SCALER \
            -DUSE_EXTERNAL_BUFFER -DUSE_FAST_EC -DUSE_VP9_EC -DGET_FREE_BUFFER_NON_BLOCK \
diff -aur imx-vpu-hantro-1.11.0.orig/Makefile_H1 imx-vpu-hantro-1.11.0/Makefile_H1
--- imx-vpu-hantro-1.11.0.orig/Makefile_H1	2019-12-07 14:54:19.065483111 +0000
+++ imx-vpu-hantro-1.11.0/Makefile_H1	2019-12-07 14:59:17.086257028 +0000
@@ -2,6 +2,9 @@
 AR = $(CROSS_COMPILE)ar
 CFLAGS ?= -O2
 
+ifneq ($(IMX_KERNEL_HEADERS),)
+CFLAGS += -I$(IMX_KERNEL_HEADERS)
+endif
 
 SOURCE_ROOT = ./h1_encoder/software
 OMX_ROOT = ./openmax_il/source
